# workplace-vue-common-ui

- WORKPLACE 서비스에서 공통으로 사용되는 Vue CLI UI 라이브러리 프로젝트입니다.
- 자세한 내용 및 사용방법은 샘플 프로젝트를 참고하세요. ([바로 가기](https://pages.oss.navercorp.com/workplace/workplace-vue-common-ui/sample/dist/index.html))

<br>

## Project setup

1. `git clone` 후, 프로젝트 `root` 경로 에서 `npm install` 명령어를 실행합니다.
2. `root` 경로에 `.npmrc` 파일을 셋업합니다. ([npm 로컬 저장소 설정](https://yobi.navercorp.com/Any_Questions_For_FE/posts/414) 참고)
4. `npm run serve` 명령어를 실행합니다. (Compiles and hot-reloads for development)

<br>

## Global UI Component 개발 방법
1. Component 개발
    - `root/src/components/ui` 폴더 밑에 Component 를 개발합니다. `(.vue 파일)`<br>
        - Component 명칭 네이밍룰 : `ui-{대표 속성 ex. input, dropdown 등}-{세부 속성 ex. checkbox, mlng 등}`
        - Component 파일 네이밍룰 : 컴포넌트 명칭의 `pascal case`
    - `root/src/components/index.js` 파일에 개발한 Component 를 Global 로 등록합니다.
        ```javascript
        // example
        import UiDropdown from "@/components/ui/UiDropdown";
        Vue.component(UiDropdown.name, UiDropdown);
        ```
2. 샘플 페이지 개발
    - `root/src/views/sample` 폴더 밑에 샘플 페이지를 개발합니다.
    - `root/src/views/Lnb.vue`, `root/src/router/index.js` 에 router 를 등록합니다.
    
3. 테스트 및 Commit
    - 지금까지 작업한 내용에 대해 전체 테스트를 수행합니다.
    - 테스트가 완료되면 작업내용을 OSS 에 `git add|commit|push` 합니다.

4. 배포 버전 올림
    - `npm run version-up` 명령어로 한방에 배포버전을 올립니다.
        - 자동으로 `version` 관련 내용이 판올림 되며, `git push` 까지 수행됩니다.
        - 오류 발생시 직접 `package.json`을 수정합니다. (ex. 0.0.9 -> 0.0.10)

5. 샘플 프로젝트 OSS Git Pages 배포
    - `npm run release-sample` 명령어로 한방에 배포합니다.
        - 자동으로 빌드가 진행되며, static 결과물 `git push` 까지 수행됩니다.
        - 오류 발생시 하단 내용 참고하여 수동으로 배포합니다.
    - OSS Git Pages 에는 `master` branch 로 merge 하여야 최종 반영됩니다.
 
6. 라이브러리 npm-naver 배포
    - `npm run release-lib` 명령어로 한방에 배포합니다.
        - 자동으로 빌드가 진행되며, `npm-naver` registry 에 publish 까지 수행됩니다. 
        - 오류 발생시 하단 내용 참고하여 수동으로 배포합니다.

<br>

## 샘플 프로젝트 OSS Git Pages 수동 배포 방법 (Step by step)
1. 빌드 수행
    - `npm run build-sample` 명령어로 빌드를 수행합니다. (Compiles and minifies for production)<br>
    - `package.json` 에 아래와 `sample/dist` 폴더에 static 빌드 결과물이 생성되도록 설정되어 있습니다.
        ```json
        {
          "scripts": {
            "build-sample": "vue-cli-service build --dest sample/dist"
          }
        }
        ```
2. Commit
    - `root/sample/dist` 폴더 전체를 OSS 에 `git add|commit|push` 합니다.
    - OSS Git Pages 에는 `master` branch 로 merge 하여야 반영됩니다.

<br>

## 라이브러리 npm-naver 수동 배포 방법 (Step by step)
1. 빌드 수행
    - `npm run build-lib` 명령어로 빌드를 수행합니다. (Compiles and minifies for libaray)<br>
      `package.json` 에 아래와 같이 `lib/dist` 폴더에 library 빌드 결과물이 생성되도록 설정되어 있습니다.
        ```json
        {
          "scripts": {
            "build-lib": "vue-cli-service build --dest lib/dist --target lib --name workplace-vue-common-ui src/index.js"
          }
        }
        ```
2. npm-naver 배포
    - `npm publish` 명령어를 실행하여 배포합니다. (절대 기본 npm registry 로 배포 금지)<br>
      `package.json` 에 아래와 같이 `npm-naver` 로 target registry 설정되어 있습니다.
        ```json
        {
          "publishConfig": {
            "registry": "https://registry.navercorp.com/api/npm/npm-naver/"
          }
        }
        ```
    - npm registry 관련 오류 발생시 아래와 같이 default config 를 변경합니다.
      ```shell script
      npm config set registry https://registry.navercorp.com/api/npm/npm-naver/
      ```

<br>

---

### Run your unit tests
```
npm run test:unit
```

### Lints and fixes files
```
npm run lint
```

### Customize configuration
See [Configuration Reference](https://cli.vuejs.org/config/).
